{"version":3,"sources":["js/03-racetrack.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["require","horses","raceCount","refs","startBtn","document","querySelector","winerField","progressField","tableBody","addEventListener","onStart","promises","map","run","updateWinnerField","updateProgressField","determineWiner","waitForAll","horsesP","Promise","race","then","_ref","horse","time","concat","updateResultsTable","all","message","textContent","_ref2","tr","insertAdjacentHTML","resolve","getRandomTime","setTimeout","min","max","Math","floor","random","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","querySelectorAll","i","length","module"],"mappings":"ACAA,ACAA,IDAI0C,ACAAY,MAAM,GDAG,ACAAtD,GDAG,IAAI,ACAA,CAAC,cAAc,CAAC;ADCpC,ACCA,SDDS2C,ACCAY,UAAUA,CAACC,IAAI,EAAE,CDDCb,CAAA,EAAG;ADD9B3C,ECEE,ACCA,IDDI,ACCAyD,CDDCf,ADFP,MEGa,GDDG,ACCAc,EDDE,ECCE,CAACE,SAAS,CAAC,CAAC;AFDhC,EEEED,EDDEf,ADDEzC,KEEG,CAAC0D,AFFE,GCCC,ADDE,CACV,ECAWf,ACCA,GAAG,QFDD,CCAU,CAAC,ADCxB,CCDyB,CCCC,OFAjB,EACT,iBAAiB,EACjB,YAAY,EACZ,YAAY,CACb;AACJ,ECLE,ECCEY,AFIAtD,IEJI,CAAC0D,IFII,EEJE,CAAC,AFIA,CEJC,AFIA;AAEjB,ECLE,ACAA,CAAC,CFKGzD,IAAI,CCLDuC,EDKI,OCLK;AAClB,ECAEe,AFKGrD,OELI,CAACyD,AFKG,EAAExD,EELD,GAAGmD,GFKM,CELF,AFKGlD,CELFuD,IAAI,CAACC,KAAK,CAAC,CFKI,CAAC,CELF,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAGC,EFKK,CAAC,CELF,CAACC,GAAG,CAAC,CAAC;ADE3D,ECDER,AFKGjD,IELC,CAAC0D,EDCErB,GDIM,EAAEvC,GELA,CAAC6D,GDCGtB,CAAA,ADII,CAACtC,CCJF,MCDM,CAACmD,KFKQ,CAAC,CELF,EAAED,IAAI,CAACW,IFKO,CAAC,MELG,CAAC;AACzD,EDCE,ADIG3D,aAAa,EAAEH,QAAQ,CAACC,aAAa,CAAC,cAAc,CAAC;AEH1D,EDAE,ADIGG,EEJD2D,EDAE,KDIQ,EAAE/D,CEJF,GAAG,IAAI,AFIG,CAACC,aAAa,CAAC,2BAA2B;AEHlE,AFKA,CAAC,GCLG,KCAK+D,CDAC,IAAIxB,ICAIwB,CDAC,ACAD,CDAA,CAAC,ACAE;AFOrBlE,ECNE,ACAA,CDAC,CAAC,ADMA,CAACC,CENCgE,KDAKtB,EDME,CCNC,ADMApC,ECNE,ACAA,EAAE,YFMY,CAAC,OAAO,EAAEC,OAAO,CAAC;AAEhD,ICPI,ACAA,IDAIoC,CDOCpC,MCPM,CDOCA,C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","file":"03-racetrack.4f389e3e.js","sourceRoot":"../src","sourcesContent":["import '../css/common.css';\n\nconst horses = [\n     'Secretariat',\n     'Eclipse',\n     'West Australian',\n     'Flying Fox',\n     'Seabiscuit',\n   ];\nlet raceCount = 0;\n\nconst refs = {\n     startBtn: document.querySelector('.js-start-race'),\n     winerField: document.querySelector('.js-winner'),\n     progressField: document.querySelector('.js-progress'),\n     tableBody: document.querySelector('.js-results-table > tbody'),\n\n};\n\nrefs.startBtn.addEventListener('click', onStart);\n\nfunction onStart() {\n     raceCount += 1;\n     const promises = horses.map(run);\n\n     updateWinnerField('');\n     updateProgressField('ü§ñ –ó–∞–µ–∑–¥ –Ω–∞—á–∞–ª—Å—è, —Å—Ç–∞–≤–∫–∏ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è!');\n     determineWiner(promises);\n     waitForAll(promises);\n};\n\nfunction determineWiner(horsesP) {\n     Promise.race(horsesP).then(({horse, time}) => {\n          updateWinnerField(`üéâ –ü–æ–±–µ–¥–∏–ª ${horse}, —Ñ–∏–Ω–∏—à–∏—Ä–æ–≤–∞–≤ –∑–∞ ${time}\n          –≤—Ä–µ–º–µ–Ω–∏`);\n          updateResultsTable({ horse, time, raceCount })\n     });\n};\n\nfunction waitForAll(horsesP) {\n     Promise.all(horsesP).then(() => {\n          updateProgressField('üìù –ó–∞–µ–∑–¥ –æ–∫–æ–Ω—á–µ–Ω, –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è —Å—Ç–∞–≤–∫–∏.');\n     });  \n};\n\nfunction updateWinnerField(message) {\n     refs.winerField.textContent = message;\n};\n\nfunction updateProgressField(message) {\n     refs.progressField.textContent = message;\n};\n\nfunction updateResultsTable({ horse, time, raceCount }) {\n     const tr = `<tr><td>${raceCount}</td><td>${horse}</td><td>${time}</td></tr>`;\n     refs.tableBody.insertAdjacentHTML('beforeend', tr);\n   };\n\n     function run (horse) {\n          return new Promise((resolve) => {\n             const time = getRandomTime(2000, 3500)\n    \n             setTimeout(() => {\n\n                   resolve({horse, time});\n                  }, time);\n               })\n            };\n        \n     \n     function getRandomTime(min, max) {\n          return Math.floor(Math.random() * (max - min + 1) + min);\n     };","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}